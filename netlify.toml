# Netlify configuration file
# https://docs.netlify.com/configure-builds/file-based-configuration/

[build]
  # Directory to change to before starting a build.
  # base = "/" # Not needed if root is the base

  # Directory (relative to root of your repo) that contains the deploy-ready
  # HTML files and assets generated by the build. If a base directory has
  # been specified, publish is relative to the base directory.
  publish = "public"

  # Default build command.
  command = "hugo --gc --minify -D -F" # Added -D -F flags

# Build context specific settings
[build.environment]
  # Specify the Hugo version Netlify should use
  HUGO_VERSION = "0.145.0" # Match local version
  HUGO_ENABLEGITINFO = "true"

# Production context: All deploys from the main repository branch
# will inherit these settings. Branch specific settings override these.
[context.production]
  command = "hugo --gc --minify -D -F" # Added -D -F flags for production
  [context.production.environment]
    HUGO_ENV = "production"

# Deploy Preview context: All Deploy Previews
# will inherit these settings.
[context.deploy-preview]
  command = "hugo --gc --minify -b $DEPLOY_PRIME_URL"
  [context.deploy-preview.environment]
    HUGO_VERSION = "0.145.0" # Match local version

# Branch Deploy context: All deploys that are not from a pull/merge request
# or from the production branch will inherit these settings.
[context.branch-deploy]
  command = "hugo --gc --minify -b $DEPLOY_PRIME_URL"
  [context.branch-deploy.environment]
    HUGO_VERSION = "0.145.0" # Match local version
